# ⚡ Playwright দ্রুত রেফারেন্স - Cheat Sheet

## 🎯 এই গাইডে কি আছে?

এটি একটি **quick reference guide** যেখানে সব গুরুত্বপূর্ণ commands, methods এবং techniques এক জায়গায় আছে।

---

## 🚀 Basic Setup

### 📦 **Installation:**
```bash
# Install Playwright
pip install playwright

# Install browsers
playwright install

# Install specific browser
playwright install chromium
playwright install firefox
playwright install webkit
```

### 🎭 **Basic Structure:**
```python
from playwright.sync_api import sync_playwright

with sync_playwright() as p:
    browser = p.chromium.launch(headless=False)
    page = browser.new_page()
    page.goto("https://example.com")
    
    # Your scraping code here
    
    browser.close()
```

---

## 🌐 Browser ও Page Management

### 🚀 **Browser Launch:**
```python
# Basic launch
browser = p.chromium.launch()

# With options
browser = p.chromium.launch(
    headless=True,           # Background এ run
    slow_mo=100,            # Slow motion (debugging)
    args=['--no-sandbox']   # Additional arguments
)

# Different browsers
browser = p.chromium.launch()  # Chrome/Chromium
browser = p.firefox.launch()   # Firefox
browser = p.webkit.launch()    # Safari
```

### 📄 **Page Operations:**
```python
# New page
page = browser.new_page()

# Navigate
page.goto("https://example.com")
page.goto("https://example.com", wait_until="networkidle")

# Page info
print(page.title())
print(page.url)

# Reload
page.reload()

# Go back/forward
page.go_back()
page.go_forward()

# Close
page.close()
browser.close()
```

---

## 🔍 Element Selection

### 🎯 **Locator Methods:**
```python
# CSS Selectors
page.locator(".class-name")        # Class
page.locator("#element-id")        # ID
page.locator("tag-name")           # Tag
page.locator("[attribute='value']") # Attribute

# Text content
page.locator("text=Exact text")
page.locator("text=Partial")       # Partial match

# XPath
page.locator("xpath=//div[@class='content']")

# Combination
page.locator("div.container >> .item")
```

### 📊 **Element Information:**
```python
element = page.locator(".selector")

# Count
count = element.count()

# Existence check
if element.count() > 0:
    print("Element exists")

# Get all matching elements
elements = element.all()
```

---

## 📝 Data Extraction

### 📖 **Text Content:**
```python
# Single element
text = page.locator(".text").text_content()

# Multiple elements
texts = page.locator(".text").all_text_contents()

# Inner text (visible text only)
inner_text = page.locator(".text").inner_text()
```

### 🔗 **Attributes:**
```python
# Get attribute
href = page.locator("a").get_attribute("href")
src = page.locator("img").get_attribute("src")

# Check attribute existence
has_class = page.locator("div").get_attribute("class") is not None
```

### 🏷️ **HTML Content:**
```python
# Inner HTML
html = page.locator(".content").inner_html()

# Outer HTML
full_html = page.locator(".content").outer_html()
```

---

## 🖱️ User Interactions

### 👆 **Click Actions:**
```python
# Simple click
page.locator("button").click()

# Click with options
page.locator("button").click(
    button="right",      # Right click
    click_count=2,       # Double click
    delay=100           # Delay between clicks
)

# Force click (even if not visible)
page.locator("button").click(force=True)
```

### ⌨️ **Typing:**
```python
# Type text
page.locator("input").fill("Hello World")

# Type with delay
page.locator("input").type("Hello", delay=100)

# Clear and type
page.locator("input").clear()
page.locator("input").fill("New text")

# Press keys
page.locator("input").press("Enter")
page.locator("input").press("Control+A")
```

### 📋 **Form Handling:**
```python
# Select dropdown
page.locator("select").select_option("value")
page.locator("select").select_option(label="Option Text")

# Checkbox/Radio
page.locator("input[type='checkbox']").check()
page.locator("input[type='checkbox']").uncheck()

# File upload
page.locator("input[type='file']").set_input_files("path/to/file.txt")
```

---

## ⏳ Wait Strategies

### 🕐 **Wait for Load:**
```python
# Wait for page load
page.wait_for_load_state("load")           # Basic load
page.wait_for_load_state("domcontentloaded") # DOM ready
page.wait_for_load_state("networkidle")    # No network activity

# Wait for element
page.wait_for_selector(".content", timeout=10000)

# Wait for element to be visible
page.locator(".content").wait_for(state="visible")

# Wait for element to be hidden
page.locator(".loading").wait_for(state="hidden")
```

### ⏱️ **Custom Waits:**
```python
# Wait for function
page.wait_for_function("() => document.readyState === 'complete'")

# Wait for URL
page.wait_for_url("**/success")

# Simple timeout
page.wait_for_timeout(2000)  # 2 seconds
```

---

## 📸 Screenshots ও PDF

### 📷 **Screenshots:**
```python
# Full page screenshot
page.screenshot(path="screenshot.png")

# Element screenshot
page.locator(".content").screenshot(path="element.png")

# Screenshot with options
page.screenshot(
    path="screenshot.png",
    full_page=True,        # Full page
    quality=80,           # JPEG quality
    type="jpeg"           # Format
)
```

### 📄 **PDF Generation:**
```python
# Generate PDF
page.pdf(path="page.pdf")

# PDF with options
page.pdf(
    path="page.pdf",
    format="A4",
    print_background=True,
    margin={"top": "1cm", "bottom": "1cm"}
)
```

---

## 🍪 Cookies ও Storage

### 🍪 **Cookie Management:**
```python
# Get cookies
cookies = page.context.cookies()

# Set cookies
page.context.add_cookies([{
    "name": "session_id",
    "value": "abc123",
    "domain": "example.com",
    "path": "/"
}])

# Clear cookies
page.context.clear_cookies()
```

### 💾 **Local Storage:**
```python
# Set local storage
page.evaluate("localStorage.setItem('key', 'value')")

# Get local storage
value = page.evaluate("localStorage.getItem('key')")

# Clear local storage
page.evaluate("localStorage.clear()")
```

---

## 🌐 Network ও Requests

### 📡 **Request Interception:**
```python
# Intercept requests
def handle_request(route, request):
    if "ads" in request.url:
        route.abort()  # Block ads
    else:
        route.continue_()

page.route("**/*", handle_request)
```

### 📊 **Response Handling:**
```python
# Wait for response
with page.expect_response("**/api/data") as response_info:
    page.click("button")

response = response_info.value
print(response.status)
print(response.json())
```

---

## 📱 Mobile Emulation

### 📲 **Device Emulation:**
```python
# iPhone emulation
iphone = p.devices["iPhone 13"]
context = browser.new_context(**iphone)
page = context.new_page()

# Custom mobile settings
context = browser.new_context(
    viewport={"width": 375, "height": 667},
    user_agent="Mozilla/5.0 (iPhone; CPU iPhone OS 14_0 like Mac OS X)",
    is_mobile=True,
    has_touch=True
)
```

---

## 🔧 Advanced Techniques

### 🎭 **Multiple Pages:**
```python
# Handle new page
with context.expect_page() as new_page_info:
    page.click("a[target='_blank']")

new_page = new_page_info.value
print(new_page.title())
```

### 🖼️ **Frames:**
```python
# Access frame
frame = page.frame("frame-name")
frame.locator(".content").click()

# Frame by URL
frame = page.frame(url="**/iframe-content")
```

### 🎨 **JavaScript Execution:**
```python
# Execute JavaScript
result = page.evaluate("() => document.title")

# Execute with arguments
result = page.evaluate("(x, y) => x + y", 5, 3)

# Add script tag
page.add_script_tag(content="console.log('Hello')")
```

---

## ❌ Error Handling

### 🛡️ **Try-Catch:**
```python
try:
    page.locator(".button").click(timeout=5000)
except Exception as e:
    print(f"Error: {e}")
```

### ⏰ **Timeout Settings:**
```python
# Global timeout
page.set_default_timeout(30000)  # 30 seconds

# Method-specific timeout
page.locator(".button").click(timeout=10000)
```

---

## 🔄 Common Patterns

### 📄 **Pagination:**
```python
while True:
    # Scrape current page
    items = page.locator(".item").all()
    
    # Process items
    for item in items:
        print(item.text_content())
    
    # Check for next button
    next_btn = page.locator(".next")
    if next_btn.count() == 0:
        break
    
    next_btn.click()
    page.wait_for_load_state("networkidle")
```

### 🔄 **Infinite Scroll:**
```python
# Scroll to bottom
page.evaluate("window.scrollTo(0, document.body.scrollHeight)")

# Scroll with loop
previous_height = 0
while True:
    page.evaluate("window.scrollTo(0, document.body.scrollHeight)")
    page.wait_for_timeout(2000)
    
    new_height = page.evaluate("document.body.scrollHeight")
    if new_height == previous_height:
        break
    previous_height = new_height
```

### 🔐 **Login Pattern:**
```python
# Login
page.goto("https://example.com/login")
page.fill("input[name='username']", "your_username")
page.fill("input[name='password']", "your_password")
page.click("button[type='submit']")

# Wait for redirect
page.wait_for_url("**/dashboard")
```

---

## 🎯 Quick Commands

### 📋 **Essential Commands:**
```bash
# Generate code
playwright codegen https://example.com

# Show trace
playwright show-trace trace.zip

# Install browsers
playwright install

# Check installation
playwright --version
```

### 🐛 **Debugging:**
```python
# Debug mode
page.pause()  # Interactive debugging

# Slow motion
browser = p.chromium.launch(slow_mo=1000)

# Screenshots for debugging
page.screenshot(path=f"debug-{datetime.now()}.png")
```

---

## 🎉 সমাপনী

এই cheat sheet এ আছে:

✅ **Basic setup ও browser management**  
✅ **Element selection ও data extraction**  
✅ **User interactions ও form handling**  
✅ **Wait strategies ও timing**  
✅ **Screenshots, PDF, cookies**  
✅ **Network handling ও mobile emulation**  
✅ **Advanced techniques ও error handling**  
✅ **Common patterns ও debugging**  

### 🔖 **Bookmark করুন:**
এই page টি bookmark করে রাখুন - coding এর সময় দ্রুত reference এর জন্য!

**আরো বিস্তারিত জানতে: [সম্পূর্ণ গাইড](./সম্পূর্ণ-playwright-গাইড.md)**

**শুভ স্ক্র্যাপিং! ⚡🇧🇩**
